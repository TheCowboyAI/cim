#!/usr/bin/env bash
# Direnv configuration for CIM development environment

# Use the nix flake
use flake

# Note: GUI applications like Zed won't work through direnv
# For Zed, either:
# 1. Run 'nix develop' manually and then 'zed'
# 2. Create an alias: alias zed='nix develop -c zed'
# 3. Use terminal editors (hx or micro) which work fine with direnv

# Set up some helpful aliases for terminal editors
export EDITOR="${EDITOR:-hx}"
export VISUAL="${VISUAL:-hx}"

# Create helix config directory if needed
mkdir -p ~/.config/helix 2>/dev/null

# Remind about editor options when entering directory
if [ ! -f ~/.config/helix/config.toml ] && [ -f examples/helix-vscode-config.toml ]; then
  echo "ðŸ’¡ Tip: For VS Code keybindings in helix:"
  echo "   cp examples/helix-vscode-config.toml ~/.config/helix/config.toml"
fi

# Project-specific environment variables
export CIM_ROOT="$PWD"
export CIM_DOCS="$PWD/doc"

# Success message
echo "ðŸ§¬ CIM environment loaded (terminal tools only)"
echo "   For Zed: use 'nix develop -c zed' or 'nix run nixpkgs#zed-editor'"